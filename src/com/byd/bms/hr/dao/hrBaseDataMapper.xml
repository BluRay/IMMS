<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.byd.bms.hr.dao.IHrBaseDataDao">
    <select id="getOrgDataTreeList" parameterType="Map" resultType="Map">
		SELECT
         id,CONCAT(parent_id,'') parent_id,name_en as name,name as display_name,org_code as short_name,
         manager,org_type,org_kind,responsibilities,
         (SELECT COUNT(1) FROM BMS_BASE_ORG f2 WHERE f2.parent_id = t.id) AS sub_count
          FROM BMS_BASE_ORG t WHERE t.deleted = 0 
         <if test="id!=null">
             AND t.id=#{id} 
         </if>
         <if test="parent_id!=null">
             AND t.parent_id=#{parent_id} 
         </if>
         ORDER BY sort_number ASC	
	</select>
	
</mapper>
